import { Callout } from 'nextra/components'
import { Tabs, Tab } from 'nextra-theme-docs'
import Cards from '@/components/Cards/Cards'
import { languages } from '@/data/languages'
import Image from 'next/image'

<Callout type="info">
  Note: Executing code inside your Glass file is still experimental. We are actively working on improving it while
  staying up to date with announcements from model providers. If you want to use Glass in your project, message us on
  [Discord](https://discord.com/invite/H64PFP2DCc)
</Callout>

## Languages supported

<Cards children={languages} />

## Executable Code

Glass has experimental support for an element called `<Code>` which lets you write code to be executed before the prompt is evaluated. This is useful for fetching data, running calculations, or executing any other code that you want to run before prompting the LLM.

You can update your default langauge in [VSCode settings](/vscode) or by adding a language to the frontmatter of your file.

```glass copy filename="example.glass"

<Code>
const myMessage = "This is code! You can define which language you want in the frontmatter or adjust your default language in your VSCode settings."
</Code>


<System>
@{myMessage}
</System>

<Request model="gpt-3.5-turbo" />
```

## Event Handling: onResponse

Just like React's event handling, Glass has a similar event handling system. The `onResponse` function evaluates when the request has been made and the response is received. This is most useful for taking actions after a response has been received, such as updating the state of the Glass file.

An example of a request with an `onResponse` function is shown below. You can access the response from the request by using the `.message` attribute of the response object.

```glass copy filename="example.glass"
<Request model="gpt-4" onResponse = {response => {
    someFunction(response.message)
}} />
```

## State Management: useState

Just like React's [`useState`](https://react.dev/reference/react/useState) hook that allows you to add a state variable to your component. Glass also allows `useState`. By declaring a state variable:

```glass copy filename="example.glass"
<Code>
const [stateVariable, setStateVariable] = useState(initialValue)
</Code>
```

You can then update the state variable by calling the `setStateVariable` function. This will add the updated state variable to the Glass file.

```glass copy filename="example.glass"
<Code>
const [stateVariable, setStateVariable] = useState(initialValue)
setStateVariable(newValue)
</Code>
```

Here is an example of `onResponse` and `useState` being used together:

###

<Image src="/screenshots/events_state.png" width={750} height={750} />

When you look at the History tab in the [Playground](/playground), you can see the state variables being updated. You can also see the state variables being updated in the Glass file. The messages in the session are added to the `<Transcript>` block which keeps a running transcript of the conversation in the session.

###

<Image src="/screenshots/events_state_transcript.png" width={750} height={750} />
